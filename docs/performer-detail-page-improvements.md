# 出演者詳細ページ改修 要件定義書

## 1. 概要

### 1.1 プロジェクト名
BEAUTY ROAD Dashboard - 出演者詳細ページUI改善

### 1.2 改修対象
- ページ: `/project/{id}/performer/{performerId}`
- ファイル: `src/app/project/[id]/performer/[performerId]/page.tsx`

### 1.3 改修目的
- 台本リンクの視認性向上
- 台本準備状況の明確化
- 補足情報の読みやすさ改善
- モバイルユーザビリティの向上

## 2. 要件詳細

### 2.1 台本表示部分の改修

#### 2.1.1 表示ロジック

| scriptUrlの値 | 表示内容 | デザイン |
|--------------|---------|---------|
| URL文字列 | 「台本を見る」ボタン | ピンク〜紫グラデーション、影付き |
| "台本なし" | 「台本なし」バッジ | グレー系バッジ |
| null/undefined/空文字 | 「準備中」バッジ | グレー系バッジ（準備中感のあるデザイン） |

#### 2.1.2 デザイン要件

**「台本を見る」ボタン（台本URLあり）**
- 現在より大きめのサイズ
- 横幅を広く取る（モバイルでタップしやすいサイズ）
- 影付きで立体感を演出
- ホバー/タップ時のエフェクト強化
- 「台本:」ラベルとのバランスを考慮した配置

**「準備中」バッジ（空欄の場合）**
- グレー系の色調
- 点線枠や透明度調整で「未完成」感を表現
- アイコン（例：時計マーク）を追加して視覚的に分かりやすく

**「台本なし」バッジ（明示的に設定）**
- シンプルなグレー系バッジ
- 「準備中」とは異なるデザインで区別

### 2.2 補足情報表示の改修

#### 2.2.1 自動リンク化
- URLパターン（http://, https://）を自動検出
- 検出したURLをクリック可能なリンクに変換
- リンクは新規タブで開く（target="_blank", rel="noopener noreferrer"）
- リンクスタイル：標準的な青色テキストリンク（下線付き）

#### 2.2.2 改行対応
- 管理画面のテキストエリアで入力された改行をそのまま表示
- データベースに保存されている改行文字を適切にHTMLの改行として表示
- 段落感を保持した読みやすい表示

### 2.3 レイアウト改善

#### 2.3.1 台本セクションのレイアウト
```
変更前：
台本: [小さめのボタン]

変更後：
台本:
[横幅を広く取った大きめのボタン/バッジ]
```

#### 2.3.2 モバイル最適化
- 最小タップ領域: 44px × 44px（iOS推奨サイズ）
- ボタンの横幅: コンテナ幅の80%以上
- 適切な余白でタップミスを防ぐ

## 3. 実装仕様

### 3.1 コンポーネント構成

#### 3.1.1 LinkifiedText コンポーネント（新規作成）
```typescript
interface LinkifiedTextProps {
  text: string;
  className?: string;
}

// 機能：
// - URLを自動検出してリンク化
// - 改行を<br />に変換
// - XSS対策を考慮した安全な実装
```

#### 3.1.2 台本表示ロジックの変更
```typescript
// 表示条件の明確化
const getScriptDisplay = (scriptUrl: string | null | undefined) => {
  if (scriptUrl && scriptUrl !== '台本なし') {
    return 'link'; // リンクボタン表示
  } else if (scriptUrl === '台本なし') {
    return 'none'; // 台本なしバッジ表示
  } else {
    return 'preparing'; // 準備中バッジ表示
  }
};
```

### 3.2 スタイリング仕様

#### 3.2.1 台本リンクボタン
```css
/* モバイルファースト */
- min-height: 44px
- width: 100% (親要素に対して)
- padding: 12px 24px
- box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1)
- transition: all 0.3s ease
```

#### 3.2.2 準備中バッジ
```css
- background: rgba(156, 163, 175, 0.1) /* gray-400の10% */
- border: 1px dashed #9CA3AF /* gray-400 */
- color: #6B7280 /* gray-500 */
- アイコン付き表示
```

## 4. テスト要件

### 4.1 機能テスト
- [ ] 台本URL有り → リンクボタン表示
- [ ] 台本URL「台本なし」 → 台本なしバッジ表示
- [ ] 台本URL空欄 → 準備中バッジ表示
- [ ] 補足情報内のURL → クリック可能なリンク
- [ ] 補足情報の改行 → 正しく表示

### 4.2 UIテスト
- [ ] モバイル表示でのタップしやすさ
- [ ] 各種状態でのデザイン確認
- [ ] レスポンシブ対応

## 5. 影響範囲

### 5.1 影響を受けるファイル
- `src/app/project/[id]/performer/[performerId]/page.tsx`

### 5.2 新規作成ファイル
- なし（インラインでの実装を想定）

### 5.3 データベース影響
- なし

## 6. 実装優先順位

1. 台本表示ロジックの変更（準備中表示）
2. 台本リンクボタンのデザイン改善
3. 補足情報の改行対応
4. 補足情報のURL自動リンク化

## 7. 注意事項

- XSS対策：URLリンク化時は適切なサニタイズを実施
- アクセシビリティ：スクリーンリーダー対応を考慮
- パフォーマンス：URLパターンマッチングの効率性に配慮
- 後方互換性：既存データの表示に影響がないよう実装

## 8. 今後の拡張可能性

- 台本のプレビュー機能
- 台本更新通知機能
- 補足情報のリッチテキスト対応